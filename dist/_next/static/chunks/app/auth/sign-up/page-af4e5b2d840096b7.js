(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{17293:function(e,r,t){Promise.resolve().then(t.bind(t,25218)),Promise.resolve().then(t.t.bind(t,231,23)),Promise.resolve().then(t.bind(t,15821)),Promise.resolve().then(t.bind(t,1225)),Promise.resolve().then(t.bind(t,80508))},12833:function(e,r,t){"use strict";t.d(r,{j:function(){return s}});var n=t(38472);r.Z=n.Z.create({baseURL:"https://learnx-spring-app-86563bbf71fb.herokuapp.com/api/v1",headers:{"Content-Type":"application/json"}});let s=n.Z.create({baseURL:"https://learnx-spring-app-86563bbf71fb.herokuapp.com/api/v1",withCredentials:!0,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let r=localStorage.getItem("access_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e instanceof Error?e:Error(String(e))))},15821:function(e,r,t){"use strict";t.d(r,{GuestGuard:function(){return u}});var n=t(57437),s=t(2265),a=t(16463),o=t(80162),i=t(85240),l=t(48727),c=t(68692);function u(e){let{children:r}=e,t=(0,a.useRouter)(),{user:u,error:d,isLoading:h}=(0,c.a)(),[m,g]=s.useState(!0),f=async()=>{if(!h){if(d){g(!1);return}if(u){l.k.debug("[GuestGuard]: User is logged in, redirecting to dashboard"),t.replace(i.H.dashboard.accounts);return}l.k.debug("[GuestGuard]: User is not logged in, redirecting to login"),t.replace(i.H.auth.signIn),g(!1)}};return(s.useEffect(()=>{f().catch(()=>{l.k.error("[GuestGuard]: Error checking permissions",d)})},[u,d,h]),m)?null:d?(0,n.jsx)(o.Z,{color:"error",children:d}):(0,n.jsx)(s.Fragment,{children:r})}},1225:function(e,r,t){"use strict";t.d(r,{SignUpForm:function(){return k}});var n=t(57437),s=t(2265),a=t(87138),o=t(16463),i=t(31014),l=t(80162),c=t(75519),u=t(65786),d=t(28549),h=t(68038),m=t(10437),g=t(56065),f=t(41665),p=t(866),v=t(81252),x=t(83719),b=t(39343),j=t(59772),w=t(85240),Z=t(68692);let E=j.z.object({firstName:j.z.string().min(1,{message:"First name is required"}),lastName:j.z.string().min(1,{message:"Last name is required"}),email:j.z.string().min(1,{message:"Email is required"}).email(),password:j.z.string().min(6,{message:"Password should be at least 6 characters"}),terms:j.z.boolean().refine(e=>e,"You must accept the terms and conditions")}),L={firstName:"",lastName:"",email:"",password:"",terms:!1};function k(){let e=(0,o.useRouter)(),{checkSession:r}=(0,Z.a)(),[t,j]=s.useState(!1),{control:k,handleSubmit:N,setError:R,formState:{errors:U}}=(0,b.cI)({defaultValues:L,resolver:(0,i.F)(E)}),S=s.useCallback(async()=>{j(!0),await (null==r?void 0:r()),e.refresh()},[r,e,R]);return(0,n.jsxs)(v.Z,{spacing:3,children:[(0,n.jsxs)(v.Z,{spacing:1,children:[(0,n.jsx)(x.Z,{variant:"h4",children:"Sign up"}),(0,n.jsxs)(x.Z,{color:"text.secondary",variant:"body2",children:["Already have an account?"," ",(0,n.jsx)(f.Z,{component:a.default,href:w.H.auth.signIn,underline:"hover",variant:"subtitle2",children:"Sign in"})]})]}),(0,n.jsx)("form",{onSubmit:N(S),children:(0,n.jsxs)(v.Z,{spacing:2,children:[(0,n.jsx)(b.Qr,{control:k,name:"firstName",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.Z,{error:!!U.firstName,children:[(0,n.jsx)(g.Z,{children:"First name"}),(0,n.jsx)(p.Z,{...r,label:"First name"}),U.firstName?(0,n.jsx)(m.Z,{children:U.firstName.message}):null]})}}),(0,n.jsx)(b.Qr,{control:k,name:"lastName",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.Z,{error:!!U.firstName,children:[(0,n.jsx)(g.Z,{children:"Last name"}),(0,n.jsx)(p.Z,{...r,label:"Last name"}),U.firstName?(0,n.jsx)(m.Z,{children:U.firstName.message}):null]})}}),(0,n.jsx)(b.Qr,{control:k,name:"email",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.Z,{error:!!U.email,children:[(0,n.jsx)(g.Z,{children:"Email address"}),(0,n.jsx)(p.Z,{...r,label:"Email address",type:"email"}),U.email?(0,n.jsx)(m.Z,{children:U.email.message}):null]})}}),(0,n.jsx)(b.Qr,{control:k,name:"password",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.Z,{error:!!U.password,children:[(0,n.jsx)(g.Z,{children:"Password"}),(0,n.jsx)(p.Z,{...r,label:"Password",type:"password"}),U.password?(0,n.jsx)(m.Z,{children:U.password.message}):null]})}}),(0,n.jsx)(b.Qr,{control:k,name:"terms",render:e=>{let{field:r}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Z,{control:(0,n.jsx)(u.Z,{...r}),label:(0,n.jsxs)(s.Fragment,{children:["I have read the ",(0,n.jsx)(f.Z,{children:"terms and conditions"})]})}),U.terms?(0,n.jsx)(m.Z,{error:!0,children:U.terms.message}):null]})}}),U.root?(0,n.jsx)(l.Z,{color:"error",children:U.root.message}):null,(0,n.jsx)(c.Z,{disabled:t,type:"submit",variant:"contained",children:"Sign up"})]})}),(0,n.jsx)(l.Z,{color:"warning",children:"Created users are not persisted"})]})}},80508:function(e,r,t){"use strict";t.d(r,{DynamicLogo:function(){return u},T:function(){return c}});var n=t(57437),s=t(2265),a=t(51982),o=t(2453),i=t(38017);function l(e){let{children:r,defer:t=!1,fallback:a=null}=e,[o,l]=s.useState(!1);return(0,i.Z)(()=>{t||l(!0)},[t]),s.useEffect(()=>{t&&l(!0)},[t]),(0,n.jsx)(s.Fragment,{children:o?r:a})}function c(e){let r,{color:t="dark",emblem:s,height:o=60,width:i=60}=e;return r=s?"/assets/utez-logo-emblem.svg":"/assets/utez-logo-emblem-w-text.svg",(0,n.jsx)(a.Z,{alt:"logo",component:"img",height:o,src:r,width:i})}function u(e){let{colorDark:r="light",colorLight:t="dark",height:s=60,width:i=60,...u}=e,{colorScheme:d}=(0,o.tv)();return(0,n.jsx)(l,{fallback:(0,n.jsx)(a.Z,{sx:{height:"".concat(s,"px"),width:"".concat(i,"px")}}),children:(0,n.jsx)(c,{color:"dark"===d?r:t,height:s,width:i,...u})})}},22298:function(e,r,t){"use strict";t.d(r,{S:function(){return i},UserProvider:function(){return l}});var n=t(57437),s=t(2265),a=t(93814),o=t(48727);let i=s.createContext(void 0);function l(e){let{children:r}=e,[t,l]=s.useState({user:null,error:null,isLoading:!0}),c=s.useCallback(async()=>{try{let{data:e,error:r}=await a.U.getUser();if(o.k.debug("UserProvider check session: ",{data:e,error:r}),r){o.k.error(r);return}l(r=>({...r,user:null!=e?e:null,error:null,isLoading:!1}))}catch(e){o.k.error(e),l(e=>({...e,user:null,error:"Something went wrong",isLoading:!1}))}},[]);return s.useEffect(()=>{c().catch(e=>{o.k.error(e)})},[]),(0,n.jsx)(i.Provider,{value:{...t,checkSession:c},children:r})}i.Consumer},68692:function(e,r,t){"use strict";t.d(r,{a:function(){return a}});var n=t(2265),s=t(22298);function a(){let e=n.useContext(s.S);if(!e)throw Error("useUser must be used within a UserProvider");return e}},93814:function(e,r,t){"use strict";t.d(r,{U:function(){return i}});var n=t(12833),s=t(44785),a=t(48727);class o{async signInWithOAuth(e){return{error:"Social authentication not implemented"}}async signInWithPassword(e){let{emailForm:r,password:t}=e;try{let e=(await n.Z.post("/auth/authenticate",{email:r,password:t})).data.data;a.k.debug("Sign in with password response: ",e);let{accessToken:s,refreshToken:o,fullName:i,email:l,avatar:c,role:u}=e;if("ADMIN"!==u)return{error:"You have no permission to access this pages!"};let d={fullName:i,email:l,avatarUrl:c,role:u};return localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",o),localStorage.setItem("logged_user",JSON.stringify(d)),a.k.debug("User logged in: ",d),{data:d}}catch(e){return a.k.error("Sign in with password error: ",e),{error:"An unknown error occurred"}}}async resetPassword(e){return{error:"Password reset not implemented"}}async updatePassword(e){return{error:"Update reset not implemented"}}async getUser(){let e=localStorage.getItem("logged_user");return e?{data:JSON.parse(e)}:{data:null}}async signOut(){return s.Z.remove("access_token"),s.Z.remove("refresh_token"),localStorage.removeItem("logged_user"),{}}}let i=new o},48727:function(e,r,t){"use strict";let n;t.d(r,{k:function(){return h}});var s,a,o,i=t(20357);let l={ERROR:"ERROR",WARN:"WARN",DEBUG:"DEBUG",ALL:"ALL"},c={NONE:0,ERROR:1,WARN:2,DEBUG:3,ALL:4};class u{canWrite(e){return this.levelNumber>=c[e]}write(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];let s=this.prefix;this.showLevel&&(s="- ".concat(e," ").concat(s)),e===l.ERROR?console.error(s,...t):console.log(s,...t)}constructor({prefix:e="",level:r=l.ALL,showLevel:t=!0}){var n=this;this.debug=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];n.canWrite(l.DEBUG)&&n.write(l.DEBUG,...r)},this.warn=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];n.canWrite(l.WARN)&&n.write(l.WARN,...r)},this.error=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];n.canWrite(l.ERROR)&&n.write(l.ERROR,...r)},this.prefix=e,this.level=r,this.levelNumber=c[this.level],this.showLevel=t}}var d=t(20357);let h=function(){let{prefix:e,level:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u({prefix:e,level:r})}({level:{site:{name:"Learn-X",description:"",themeColor:"#090a0b",url:n=(n=(n=null!==(a=null!==(s=i.env.NEXT_PUBLIC_SITE_URL)&&void 0!==s?s:i.env.NEXT_PUBLIC_VERCEL_URL)&&void 0!==a?a:"http://localhost:3000/").includes("http")?n:"https://".concat(n)).endsWith("/")?n:"".concat(n,"/"),logo:"./assets/utez-logo-emblem.svg"},logLevel:null!==(o=d.env.NEXT_PUBLIC_LOG_LEVEL)&&void 0!==o?o:l.ALL}.logLevel})},85240:function(e,r,t){"use strict";t.d(r,{H:function(){return n}});let n={home:"/",auth:{signIn:"/auth/sign-in",signUp:"/auth/sign-up",resetPassword:"/auth/reset-password"},dashboard:{accounts:"/dashboard/accounts",permissions:"/dashboard/permissions",profile:"/dashboard/profile"},errors:{notFound:"/errors/not-found"}}}},function(e){e.O(0,[40,111,339,838,87,866,280,171,302,146,514,971,23,744],function(){return e(e.s=17293)}),_N_E=e.O()}]);